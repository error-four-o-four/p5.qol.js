var p5QoL=function(){"use strict";function z(t){if(t===null)throw new Error("Expected NonNullable")}function D(t,e=300){let i;return function(...o){clearTimeout(i),i=setTimeout(()=>t.apply(this,o),e)}}function w(t){return typeof t=="number"&&t===t}function E(t){return typeof t=="string"}function W(t){return E(t)&&["p2d","webgl"].includes(t)}function R(t){return typeof t=="object"&&t===t}function g(t,e){Object.keys(e).forEach(i=>{t.prototype[i]=e[i]})}function f(t){return t._isGlobal?window:t}function F(t){return z(t.canvas),z(t.canvas.parentElement),[t.canvas.parentElement.clientWidth,t.canvas.parentElement.clientHeight]}function q(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function A(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}function N(){return[q(),A()]}const S={centerOrigin:!1};function X(t=!0){const e=u.call(this,"centerOrigin");t!==e&&l.call(this,"centerOrigin",t)}function Y(){u.call(this,"centerOrigin")&&(this._renderer.isP3D||this.translate(this.widthHalf,this.heightHalf))}function x(t){g(t,{centerOrigin:X}),t.prototype.registerMethod("pre",function(){Y.call(this)})}const M={widthHalf:0,heightHalf:0,resizeRatio:1,resizeRatioX:1,resizeRatioY:1};function T(t){const e=["type","margin","initialWindowWidth","initialWindowHeight"],[i,n,o,r]=e.map(c=>u.call(t,c));if(i==="window"||i==="fill"){const[c,a,h]=b(t,{type:i,margin:n});return[a,h]}const d=t.windowWidth/o,s=t.windowHeight/r;return[t.width*d,t.height*s]}function P(){const{width:t,height:e}=this;this._setProperty("widthHalf",.5*t),this._setProperty("heightHalf",.5*e)}function j(t){g(t,M);const e=t.prototype.resizeCanvas;t.prototype.resizeCanvas=function(...i){const n=f(this),o=e.bind(n),r=P.bind(n),d=n.width,s=n.height;let c=d,a=s,h=!!i[2];i[0]!==void 0?(c=i[0],a=w(i[1])?i[1]:c):[c,a]=T(n),o(c,a,h),r();const y=n.width*n.height/(d*s);n._setProperty("resizeRatio",y),n._setProperty("resizeRatioX",n.width/d),n._setProperty("resizeRatioY",n.height/s)}}const p={type:"custom",margin:0};function Q(t){return t!==void 0&&w(t)}function U(...t){const e=w(t[0])?Math.max(0,t[0]):100,i=w(t[1])?Math.max(0,t[1]):e,n=e===i?"square":"custom",o=W(t[1])?t[1]:W(t[2])?t[2]:"p2d",r=R(t[2])?t[2]:R(t[3])?t[3]:void 0;return[n,e,i,o,r]}function k(t){return!w(t)||t===void 0}function B(t){if("type"in t){const{type:e}=t;return e==="window"||e==="fill"}return!1}function b(t,e){const i=e.margin||p.margin;let n=e.type==="window"?[t.windowWidth,t.windowHeight]:F(t);return i>0&&(n=n.map(o=>(1-i)*o)),[e.type,n[0],n[1]]}function G(t){if("type"in t){const{type:e}=t;return e==="square"}return!1}function V(t,e){let i;if(e.width&&!e.margin)i=e.width;else{const n=e.margin||p.margin;i=Math.min(t.windowWidth,t.windowHeight),i=(1-n)*i}return["square",i,i]}function I(t){return!("type"in t)}function J(t){const{width:e,height:i}=t;return i?["custom",e,i]:["square",e,e]}function K(t,e){const i=e.renderer||"p2d";let n=p.type,o=0,r=0;return B(e)&&([n,o,r]=b(t,e)),G(e)&&([n,o,r]=V(t,e)),I(e)&&([n,o,r]=J(e)),!o&&!r&&console.log("Something went wrong."),[n,o,r,i]}function Z(t){const e=t.prototype.createCanvas;t.prototype.createCanvas=function(i,...n){const o=f(this),r=e.bind(o),d=P.bind(o);let s,c,a,h,y;if(Q(i)&&([s,c,a,h,y]=U(i,...n)),k(i)){const L=i||{type:"window",margin:.1,resizeCanvas:!0,toggleLoop:!0},ft=["margin","centerOrigin","resizeCanvas","toggleLoop","resizeDelay"];for(const O of ft){const $=L[O];$&&l.call(o,O,$)}[s,c,a,h]=K(o,L)}(c===void 0||a===void 0)&&(console.log("`createCanvas` - Using fallback values ..."),c=a=100,s="square"),s!==void 0&&l.call(o,"type",s);const ht=r(c,a,h,y);return d(),ht}}const tt={initialWindowWidth:1,initialWindowHeight:1,isResizing:!1,resizeCanvas:!1,resizeDelay:600,toggleLoop:!1},et={windowResizeRatioX:1,windowResizeRatioY:1};function C(){const t="resize",e=it.bind(this),i={once:!0};window.addEventListener(t,e,i)}function it(t){const e=f(this),i=u.call(e,"toggleLoop");v.call(e,t,"windowResizeTriggered"),l.call(e,"isResizing",!0),i&&e.noLoop()}function nt(){const t="resize",e=u.call(this,"resizeDelay"),i=D(ot.bind(this),e);window.addEventListener(t,i)}function ot(t){const e=f(this),i=u.call(e,"toggleLoop");u.call(e,"resizeCanvas")&&e.resizeCanvas(),l.call(e,"isResizing",!1),l.call(e,"initialWindowWidth",e.windowWidth),l.call(e,"initialWindowHeight",e.windowHeight),v.call(e,t,"windowResizeFinished"),i&&e.loop(),C.call(e)}function rt(t){const e=f(this),[i,n]=N(),o=e.windowWidth,r=e.windowHeight,d=i/o,s=n/r;e._setProperty("windowWidth",i),e._setProperty("windowHeight",n),e._setProperty("windowResizeRatioX",d),e._setProperty("windowResizeRatioY",s),v.call(e,t,"windowResized")}function v(t,e){let i;typeof this[e]=="function"&&(i=this[e](t),i!==void 0&&!i&&t.preventDefault())}function st(t){g(t,{_onresize:rt,...et}),t.prototype.registerMethod("afterSetup",function(){const e=f(this);l.call(e,"initialWindowWidth",e.windowWidth),l.call(e,"initialWindowHeight",e.windowHeight),C.call(e),nt.call(e)})}const m="_QoLConfig",H={...S,...p,...tt};function ct(t){t.prototype[m]={...H}}function l(t,e){const n=typeof this[m][t],o=typeof e;if(n!==o){console.log(`Wrong argument for ${t}.
Expected typeof ${n} but received ${o}:${e}`);return}this[m][t]=e}function u(t){let e=this[m][t];return e==null&&(console.log(`Something went wrong.
Private property ${t} is ${e}.`),e=H[t]),e}function at(){const e=!this.fullscreen();return this.fullscreen(e),e}function lt(t){g(t,{toggleFullscreen:at})}function dt(){const e=!this.isLooping();return e?this.loop():this.noLoop(),this._setProperty("_loop",e),e}function ut(t){g(t,{toggleLoop:dt})}const _=t=>{ct(t),x(t),lt(t),ut(t),j(t),Z(t),st(t),console.log("%cp5.QoL.js","color: white; background: #ff1493;")};return window.p5!==void 0&&_(window.p5),_}();
